CREATE SEQUENCE seq_USERS START WITH 1 INCREMENT BY 1;
CREATE SEQUENCE seq_INVOICE START WITH 1 INCREMENT BY 1;
CREATE SEQUENCE seq_CATEGORY START WITH 1 INCREMENT BY 1;
CREATE SEQUENCE seq_BOOK START WITH 1 INCREMENT BY 1;

CREATE TABLE USERS (ID number(10) NOT NULL, FIRSTNAME varchar2(30) NOT NULL, LASTNAME varchar2(30) NOT NULL, EMAIL varchar2(30) NOT NULL, USERNAME varchar2(45) NOT NULL, PASSWORD varchar2(45) NOT NULL, ROLE varchar2(45) NOT NULL, PRIMARY KEY (ID));
CREATE TABLE INVOICE (ID number(10) NOT NULL, INVOICE_DATE date NOT NULL, INVOICE_VALUE number(9, 2) NOT NULL, USER_ID number(10) NOT NULL, PRIMARY KEY (ID));
CREATE TABLE INVOICE_POSITION (ID number(10) NOT NULL, INVOICE_ID number(10) NOT NULL, QUANTITY number(10) NOT NULL, PRICE_OF_POSITION number(5, 2) NOT NULL, BOOK_ID number(10) NOT NULL, PRIMARY KEY (ID, INVOICE_ID));
CREATE TABLE ADDRESS (ID number(10) NOT NULL, CITY varchar2(30) NOT NULL, STREET varchar2(30) NOT NULL, HOUSE_NUMBER varchar2(10) NOT NULL, POST_NUMBER varchar2(6) NOT NULL, PRIMARY KEY (ID));
CREATE TABLE CATEGORY (ID number(10) NOT NULL, CATEGORY_NAME varchar2(20) NOT NULL, PRIMARY KEY (ID));
CREATE TABLE BOOK (ID number(10) NOT NULL, TITLE varchar2(50) NOT NULL, AUTHOR varchar2(50) NOT NULL, ISBN number(13) NOT NULL, PUBLISHER varchar2(50) NOT NULL, YEAR_OF_PUBLISH number(4) NOT NULL, PLACE_OF_PUBLISH varchar2(30) NOT NULL, TYPE_OF_COVER varchar2(15) NOT NULL, PRICE number(10) NOT NULL, DESCRIPTION varchar2(256) NOT NULL, CATEGORY_ID number(10) NOT NULL, PRIMARY KEY (ID));
CREATE TABLE STOCK (ID number(10) NOT NULL, NUMBER_OF_PIECES number(5) NOT NULL, PRIMARY KEY (ID));
CREATE TABLE CART (USER_ID number(10) NOT NULL, BOOK_ID number(10) NOT NULL, QUANTITY number(10) NOT NULL, PRIMARY KEY (USER_ID, BOOK_ID));

ALTER TABLE INVOICE_POSITION ADD CONSTRAINT FKINVOICE_PO105672 FOREIGN KEY (INVOICE_ID) REFERENCES INVOICE (ID);
ALTER TABLE INVOICE_POSITION ADD CONSTRAINT FKINVOICE_PO421817 FOREIGN KEY (BOOK_ID) REFERENCES BOOK (ID);
ALTER TABLE INVOICE ADD CONSTRAINT FKINVOICE433038 FOREIGN KEY (USER_ID) REFERENCES USERS (ID);
ALTER TABLE ADDRESS ADD CONSTRAINT FKADDRESS293154 FOREIGN KEY (ID) REFERENCES USERS (ID);
ALTER TABLE BOOK ADD CONSTRAINT FKBOOK990308 FOREIGN KEY (CATEGORY_ID) REFERENCES CATEGORY (ID);
ALTER TABLE STOCK ADD CONSTRAINT FKSTOCK667221 FOREIGN KEY (ID) REFERENCES BOOK (ID);
ALTER TABLE CART ADD CONSTRAINT FKCART985471 FOREIGN KEY (USER_ID) REFERENCES USERS (ID);
ALTER TABLE CART ADD CONSTRAINT FKCART798695 FOREIGN KEY (BOOK_ID) REFERENCES BOOK (ID);

insert into category values (1, 'Adventure');
insert into category values (2, 'Comedy');
insert into category values (3, 'Lyrics');

insert into book values (1, 'Robinson Cruzoe', 'Daniel Defoe', '11111', 'Fajne Wydawnictwo', 1992, 'Warszawa', 'SOFT', 20, '2/10 Nie polecam', 1);
insert into book values (2, 'Zemsta', 'Aleksander Fredro', '22222', 'Fajne Wydawnictwo', 1993, 'Warszawa', 'HARD', 21, 'Mocium panie xD', 2);
insert into book values (3, 'Pan Tadeusz', 'Adam Mickiewicz', '333333', 'Fajne Wydawnictwo', 1994, 'Warszawa', 'SOFT', 22, 'Najlepsza książka w Poznaniu', 3);

insert into stock values (1, 7);
insert into stock values (2, 0);
insert into stock values (3, 20);

INSERT INTO USERS(id, username, password, role, firstname, lastname, email) VALUES (1, 'admin', 'admin', 'ADMIN', 'Jan', 'Kowalski', 'jkowalski@test.pl');

INSERT INTO CART(USER_ID, BOOK_ID, QUANTITY) VALUES (1, 1, 3);

commit;